import { useState } from 'react';
import Head from 'next/head';
import { Text, Container, Spacer } from '@nextui-org/react';
import FileUploadForm from '../components/forms/FileUploadForm';
import ResponseCard from '../components/ui/ResponseCard';
import ErrorCard from '../components/ui/ErrorCard';

interface IResponse {
  answer: string;
}

export default function Home() {
  const [response, setResponse] = useState<IResponse | null>(null);
  const [error, setError] = useState<string>('');

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <main>
        <Container>
          <Text h2>Upload your PDF and ask a question</Text>
          <FileUploadForm setResponse={setResponse} setError={setError} />
          {error && (
            <>
              <Spacer y={1} />
              <ErrorCard error={error} />
            </>
          )}
          {response && (
            <>
              <Spacer y={1} />
              <Text h3>Answer:</Text>
              <ResponseCard response={response} />
            </>
          )}
        </Container>
      </main>
    </>
  );
}
